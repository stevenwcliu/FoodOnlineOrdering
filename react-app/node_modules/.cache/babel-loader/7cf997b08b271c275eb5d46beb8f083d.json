{"ast":null,"code":"import _classCallCheck from \"/Users/zoezhao/Desktop/CS 157B/dsf/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/zoezhao/Desktop/CS 157B/dsf/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/zoezhao/Desktop/CS 157B/dsf/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/zoezhao/Desktop/CS 157B/dsf/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/zoezhao/Desktop/CS 157B/dsf/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/zoezhao/Desktop/CS 157B/dsf/src/component/DriverPage/GoogleMap/GoogleMap.js\";\nimport React, { Component } from 'react';\nimport './GoogleMap.css';\n\nvar GoogleMap =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(GoogleMap, _Component);\n\n  function GoogleMap() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, GoogleMap);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(GoogleMap)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      center: {\n        lat: 37.335141,\n        lng: -121.881093\n      },\n      addresses: _this.props.addresses\n    };\n\n    _this.renderMap = function () {\n      loadScript(\"https://maps.googleapis.com/maps/api/js?key=AIzaSyDc74IQbxDTgM54Dnk8SLb3Cr5yty2xz-c&callback=initMap\");\n      window.initMap = _this.initMap;\n    };\n\n    _this.initMap = function () {\n      //let init_pos = { lat: 37.335141, lng: -121.881093 };\n      var directionsService = new window.google.maps.DirectionsService();\n      var directionsDisplay = new window.google.maps.DirectionsRenderer();\n      var map = new window.google.maps.Map(document.getElementById('map'), {\n        zoom: 15,\n        center: _this.state.center\n      });\n      var infowindow = new window.google.maps.InfoWindow();\n      var test = null;\n\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(function (position) {\n          var new_pos = {\n            lat: position.coords.latitude,\n            lng: position.coords.longitude\n          }; // test = new_pos;\n          //\n\n          console.log(\"inner new pos\", new_pos); // console.log(\"inner test\", test);\n\n          var myposwindow = new window.google.maps.InfoWindow();\n          myposwindow.setContent(\"You are here\");\n          myposwindow.setPosition(new_pos);\n          myposwindow.open(map, this);\n          map.setCenter(new_pos);\n        });\n      } else {\n        alert(\"Browser does not support geolocation\");\n      } // console.log(\"outter test\", test);\n\n\n      directionsDisplay.setMap(map);\n      directionsDisplay.setPanel(document.getElementById('right-panel'));\n\n      _this.calculateAndDisplayRoute(directionsService, directionsDisplay);\n\n      window.google.maps.event.trigger(map, 'resize');\n    };\n\n    _this.calculateAndDisplayRoute = function (directionsService, directionsDisplay) {\n      var address = _this.state.addresses;\n      navigator.geolocation.getCurrentPosition(function (position) {\n        var new_pos = {\n          lat: position.coords.latitude,\n          lng: position.coords.longitude\n        }; // let addresses = [\n        //     ['SJSU (start)', new_pos],\n        //     ['Santa Clara University', '500 El Camino Real, Santa Clara, CA'],\n        //     ['San Jose Civic Center', '135 W San Carlos St, San Jose, CA'],\n        //     ['SJC Airport', '1701 Airport Blvd, San Jose, CA 95110'],\n        //     ['SJSU (end)', '1 Washington Sq, San Jose, CA'],\n        // ];\n\n        var currentLocation = ['Current Location', new_pos];\n        address.unshift(currentLocation);\n        var request = {\n          waypoints: [],\n          optimizeWaypoints: true,\n          travelMode: 'DRIVING'\n        }; // process array of addresses\n\n        for (var i = 0; i < address.length; i++) {\n          // set origin, destination, and waypoint array\n          if (i === 0) request.origin = address[i][1];else if (i === address.length - 1) request.destination = address[i][1];else {\n            request.waypoints.push({\n              location: address[i][1],\n              stopover: true\n            });\n          }\n        }\n\n        directionsService.route(request, function (result, status) {\n          if (status === window.google.maps.DirectionsStatus.OK) {\n            directionsDisplay.setDirections(result);\n          } else {\n            window.alert('Request failed due to ' + status);\n          }\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(GoogleMap, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.renderMap();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"map\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        id: \"right-panel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return GoogleMap;\n}(Component);\n\nexport { GoogleMap as default };\n\nfunction loadScript(url) {\n  var index = window.document.getElementsByTagName(\"script\")[0];\n  console.log(index);\n  var script = window.document.createElement(\"script\");\n  script.src = url;\n  script.async = true;\n  script.defer = true;\n  index.parentNode.insertBefore(script, index);\n  console.log(window.document.getElementsByTagName(\"script\")[0]);\n  console.log(window.document.getElementsByTagName(\"script\")[1]);\n}","map":{"version":3,"sources":["/Users/zoezhao/Desktop/CS 157B/dsf/src/component/DriverPage/GoogleMap/GoogleMap.js"],"names":["React","Component","GoogleMap","state","center","lat","lng","addresses","props","renderMap","loadScript","window","initMap","directionsService","google","maps","DirectionsService","directionsDisplay","DirectionsRenderer","map","Map","document","getElementById","zoom","infowindow","InfoWindow","test","navigator","geolocation","getCurrentPosition","position","new_pos","coords","latitude","longitude","console","log","myposwindow","setContent","setPosition","open","setCenter","alert","setMap","setPanel","calculateAndDisplayRoute","event","trigger","address","currentLocation","unshift","request","waypoints","optimizeWaypoints","travelMode","i","length","origin","destination","push","location","stopover","route","result","status","DirectionsStatus","OK","setDirections","url","index","getElementsByTagName","script","createElement","src","async","defer","parentNode","insertBefore"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport './GoogleMap.css'\n\n\nexport default class GoogleMap extends Component{\n\n    state = {\n       center: { lat: 37.335141, lng: -121.881093 },\n        addresses: this.props.addresses,\n\n    };\n\n    componentDidMount() {\n        this.renderMap();\n    }\n\n    renderMap = () => {\n        loadScript(\n            \"https://maps.googleapis.com/maps/api/js?key=AIzaSyDc74IQbxDTgM54Dnk8SLb3Cr5yty2xz-c&callback=initMap\"\n        );\n\n        window.initMap = this.initMap;\n\n    };\n\n   initMap = () => {\n        //let init_pos = { lat: 37.335141, lng: -121.881093 };\n        const directionsService = new window.google.maps.DirectionsService();\n        const directionsDisplay = new window.google.maps.DirectionsRenderer();\n        const map = new window.google.maps.Map(document.getElementById('map'), {\n            zoom: 15,\n            center: this.state.center,\n        });\n        let infowindow = new window.google.maps.InfoWindow();\n\n        var test = null;\n        if (navigator.geolocation) {\n            navigator.geolocation.getCurrentPosition(function(position) {\n                var new_pos = {\n                    lat: position.coords.latitude,\n                    lng: position.coords.longitude\n                };\n                // test = new_pos;\n                //\n                console.log(\"inner new pos\", new_pos);\n                // console.log(\"inner test\", test);\n                let myposwindow = new window.google.maps.InfoWindow();\n                myposwindow.setContent(\"You are here\");\n                myposwindow.setPosition(new_pos);\n                myposwindow.open(map, this);\n                map.setCenter(new_pos);\n\n            });\n        }\n        else {\n            alert(\"Browser does not support geolocation\");\n        }\n        // console.log(\"outter test\", test);\n\n        directionsDisplay.setMap(map);\n        directionsDisplay.setPanel(document.getElementById('right-panel'));\n\n        this.calculateAndDisplayRoute(directionsService, directionsDisplay);\n        window.google.maps.event.trigger(map, 'resize');\n    };\n\n\n\n    calculateAndDisplayRoute = (directionsService, directionsDisplay) => {\n        var address = this.state.addresses;\n        navigator.geolocation.getCurrentPosition(function(position) {\n            var new_pos = {\n                lat: position.coords.latitude,\n                lng: position.coords.longitude\n            };\n        // let addresses = [\n        //     ['SJSU (start)', new_pos],\n        //     ['Santa Clara University', '500 El Camino Real, Santa Clara, CA'],\n        //     ['San Jose Civic Center', '135 W San Carlos St, San Jose, CA'],\n        //     ['SJC Airport', '1701 Airport Blvd, San Jose, CA 95110'],\n        //     ['SJSU (end)', '1 Washington Sq, San Jose, CA'],\n        // ];\n            var currentLocation = ['Current Location', new_pos];\n            address.unshift(currentLocation);\n\n\n        const request = {\n            waypoints: [],\n            optimizeWaypoints: true,\n            travelMode: 'DRIVING'\n        };\n\n        // process array of addresses\n        for(var i = 0; i < address.length; i++)\n        {\n            // set origin, destination, and waypoint array\n            if (i === 0) request.origin = address[i][1];\n            else if (i === address.length - 1) request.destination = address[i][1];\n            else {\n                request.waypoints.push({\n                    location: address[i][1],\n                    stopover: true\n                });\n            }\n        }\n\n\n        directionsService.route(request, function(result, status) {\n            if (status === window.google.maps.DirectionsStatus.OK)\n            {\n                directionsDisplay.setDirections(result);\n            }\n            else\n            {\n                window.alert('Request failed due to ' + status);\n            }\n        });})\n\n    };\n\n\n    render() {\n        return (\n            <div>\n                <div id=\"map\" />\n                <div id=\"right-panel\" />\n\n            </div>\n        );\n    }\n}\n\nfunction loadScript(url) {\n    let index = window.document.getElementsByTagName(\"script\")[0];\n    console.log(index);\n    let script = window.document.createElement(\"script\");\n    script.src = url;\n    script.async = true;\n    script.defer = true;\n    index.parentNode.insertBefore(script, index);\n    console.log(window.document.getElementsByTagName(\"script\")[0]);\n    console.log(window.document.getElementsByTagName(\"script\")[1]);\n}\n\n"]},"metadata":{},"sourceType":"module"}